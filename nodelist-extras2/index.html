<!DOCTYPE HTML>
<html>

<head>
	<title>NodeList Extras 2 Unit Tests</title>
	<meta http-equiv=content-type content="text/html; charset=utf-8">

	<script src="http://yui.yahooapis.com/3.15.0/build/yui/yui-min.js"></script>
	<script src="gallery-funcprog-debug.js"></script>
	<script src="gallery-nodelist-extras2-debug.js"></script>
</head>

<body class="yui3-skin-sam">

<h1><a href="http://yuilibrary.com/gallery/show/nodelist-extras2">YUI 3 NodeList Extras 2</a> Unit Tests</h1>

<p><a href="../yuidoc/modules/gallery-nodelist-extras2.html">Show me the documentation</a></p>
<p><a href="/yui-modules/">Back to project list</a></p>

<div id="test">
	<div id="a" class="aa" />
	<div id="b" class="bb" />
	<div id="c" class="cc" />
</div>

<script type="text/javascript">
YUI({
//	filter: 'raw', combine: false,
	logInclude: { TestRunner: true }
}).use(
	'gallery-nodelist-extras2', 'test',
	'console', 'console-filters', 'dd-plugin',
function(Y)
{
	var list = Y.all('#test div');

	Y.Test.Runner.add(new Y.Test.Case(
	{
		name: 'NodeList extras 2',

		testEvery: function()
		{
			var count = 0;
			Y.Assert.isTrue(list.every(function(v, k)
			{
				count++;
				return true;
			}));
			Y.Assert.areEqual(3, count);

			var count = 0;
			Y.Assert.isFalse(list.every(function(v, k)
			{
				count++;
				return false;
			}));
			Y.Assert.areEqual(1, count);
		},

		testFind: function()
		{
			Y.Assert.areSame(list.item(1),
				list.find(function(n)
				{
					return n.hasClass('bb');
				}));
		},

		testMap: function()
		{
			Y.ArrayAssert.itemsAreEqual(['a','b','c'],
				list.map(function(n)
				{
					return n.get('id');
				}));
		},

		testPartition: function()
		{
			var o = list.partition(function(n)
			{
				return n.hasClass('bb');
			});

			Y.Assert.areEqual(1, o.matches.size());
			Y.Assert.areSame(list.item(1), o.matches.item(0));

			Y.Assert.areEqual(2, o.rejects.size());
			Y.Assert.areSame(list.item(0), o.rejects.item(0));
			Y.Assert.areSame(list.item(2), o.rejects.item(1));
		},

		testReduce: function()
		{
			Y.Assert.areEqual('abc', list.reduce('',
				function(s,n)
				{
					return s + n.get('id');
				}));
		},

		testReduceRight: function()
		{
			Y.Assert.areEqual('cba', list.reduceRight('',
				function(s,n)
				{
					return s + n.get('id');
				}));
		}
	}));

	new Y.Console(
	{
		newestOnTop: false,
		plugins: [ {fn: Y.Plugin.Drag, cfg: {handles: ['.yui3-console-hd']}}, Y.Plugin.ConsoleFilters ]
	})
	.render();

	Y.Test.Runner.run();
});
</script>

</body>
</html>
